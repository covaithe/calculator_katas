Things to try:


* More work on simplifying tests for the parser scenario.  
* try some of the good testing stuff on other designs, e.g. functional
* strategy pattern for the conditional parts.
  * refactor to strategy pattern early:  this is basically what I tried 2/20/2017
  * refactor late.  I think I could get all the way through a normal parser impl
    and only refactor to this at the very end.  Not sure it's the best idea, but 
    it's something that often happens in real life, so might be good to practice. 
  * build directly to this pattern with interface tests.  Seems ambitious, but worth trying
